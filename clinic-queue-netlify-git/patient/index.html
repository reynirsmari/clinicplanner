<!doctype html><html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Check‑In</title>
<style>body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;margin:2rem}label{display:block;margin-top:.75rem}input,select,textarea{width:320px;padding:.5rem}button{margin-top:1rem;padding:.6rem 1rem}</style></head>
<body><h1>Patient check‑in</h1>
<form id="f"><label>Full name* <input name="name" required/></label>
<label>KT <input name="kt"/></label>
<label>Phone <input name="phone"/></label>
<label>Complaint <input name="complaint"/></label>
<label>Priority <select name="priority"><option value="C">C</option><option value="B">B</option><option value="A">A</option></select></label>
<label><input type="checkbox" name="acute"/> Acute?</label>
<label>Notes <textarea name="notes" rows="3"></textarea></label>
<button type="submit">Get my ticket</button></form>
<script>
const $=q=>document.querySelector(q);
$('#f').addEventListener('submit',async(e)=>{e.preventDefault();const fd=new FormData(e.target);const payload=Object.fromEntries(fd.entries());payload.acute=fd.get('acute')==='on';
const r=await fetch('/api/tickets-create',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});const out=await r.json();
if(out.ok){location.href=`/patient/ticket.html?id=${out.id}`}else{alert('Sorry, we could not create your ticket. '+(out.error||''))}});
</script></body></html>
